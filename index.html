<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0FK7M7DYNQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0FK7M7DYNQ');
</script>
   
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1">

    <title>farfotsel</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <meta charset="utf-8">
    
    <meta property="og:title" content="farfotsel" />
    <meta property="og:url" content="https://www.farfotsel.com/" />
    <meta property="og:image" content="https://www.farfotsel.com/images/farfotsel_bg.png" />
    <meta property="og:type" content="website" />
    <meta property="fb:app_id" content="853033058137570"/>



    <style type="text/css">
     
        body {
            margin: 0px;
        }

        iframe , div.fill {
          width : 100%;
          height: 100vh;
          border : none;
        }

        #container {
            position:absolute;
            display: block;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .center {
          position: fixed;
          display: block;
          
          width: 50px;
          left: 50%;
          margin-left: -25px;
          bottom: 20px;
          
        }

        .hidden {
          visibility: hidden;
          opacity: 0;
          transition: visibility 0s .5s, opacity .5s linear;
        }


#navbar {
  background-color: none;
  position: fixed;
  top: 0;
  width: 100%;
  display: block;
  transition: top 0.3s;
}

#navbar label {
  float: left;
  display: block;
  color: black;
  text-align: center;
  padding: 15px;
  text-decoration: none;
  font-size: 17px;
  background-color: #ddd;
}

#navbar label:hover {
  background-color: #ddd;
  color: black;
  cursor: pointer;
}


    </style>
</head>
<body onload="checkIframeInViewport();hideArrow()" onscroll="checkIframeInViewport()">
    <img id="arrow" src="images/thin_arrow.png" alt="scroll for more" class="center">
    <iframe id="pointy" src="./pointy/" style="position: absolute;"></iframe>
    <div id="fill0" class="fill"></div>
    <iframe id="falling" src="./falling/" style="position: absolute;"></iframe>
    <div id="fill1" class="fill"></div>
    <iframe id="fluffy" src="./fluffy/"></iframe>
    <iframe id="throughtriangles" src="./throughtriangles/"></iframe>
    <iframe id="manyeyes" src="./manyeyes/"></iframe>
    <iframe id="pointy2" src="./pointy/" ></iframe><!--we have a copy of pointy because of iphone glitch
    point became unresoponsive after position change.
    -->
    <div id="falling2" class="fill"></div>

    <link rel="stylesheet" href="./css/moreinfo.css"/>

    <div id="navbar">
      <label onclick="onOpenClick()">Open</label>
    </div>

    <div id="moreInfoButton" onclick="toggleInfo();">
      <div class="bar1"></div>
      <div class="bar2"></div>
      <div class="bar3"></div>
    </div> 
    <div id="moreinfo">
      <img src="/images/logo_small_trans.gif" height="60" style="display:block;margin:0px;image-rendering: crisp-edges;" />
     

      <div class="about">about:</div>
      <div class="padleft">
        Farfotsels come from the spirit world. 
        They are a curious bunch who like to travel through all worlds and dimensions. 
        In our world, when they want to be seen, they appear as tiny specks of dust. 
        <!-- Althoug most of us still fail to notice them.  -->
        <br/><br/>
        <!--That's because they are attrcted (or are the cause of, this question has puzzeld the gratest scientist and phillosofers for centuries) static electricity.-->
      This interactive expierience is an art collaboration between <a href="http://www.rinskedekker.nl">Rinske Dekker</a> and <a href="http://barcinski.nl">Mark Barcinski</a>. 
      We joined our forces to create this website, our personal playground where we experiment and make beautiful stuff for fun. 
      We combine paint and pencil and creative coding to tell the story of farfotsels.
    
      </div>
      
      <div class="about">quick nav:</div>
      <div class="padleft">
        <a href="#pointy" onclick="return onNavClick(pointy)">pointy cloudy</a><br/>
        <a href="#falling" onclick="return onNavClick(falling)">falling</a><br/>
        <a href="#fluffy" onclick="return onNavClick(fluffy)">fluffy<br/>
        <a href="#throughtriangles" onclick="return onNavClick(throughtriangles)">through triangles</a><br/>
        <a href="#manyeyes" onclick="return onNavClick(manyeyes)">many eyes</a>
      </div>
    
      <div class="about">follow us:</div><br/>
      <div class="padleft" style="margin-bottom:27px;">
        <a href="https://www.facebook.com/farfotsel/"><img src="/images/icons/facebook.png" width="32" height="32" /></a>
        <a href="https://www.instagram.com/farfotsel/"><img src="/images/icons/instagram.png" width="32" height="32" /></a>
        <!--<a href="http://farfotsel.tumblr.com/"><img src="/images/icons/tumblr.png" width="32" height="32" /></a>-->
      </div>
    </div> 
</body>

<script type="text/javascript">
function onOpenClick(){
  console.log('sd')
  document.location.href = lastStarted.src;
}

function hideArrow(){
  setTimeout(() => {
    arrow.classList.add("hidden");
  }, 3000);
}
    
function onNavClick(target){
  window.scrollTo({
    top: target.offsetTop, 
    left: 0, 
    behavior: 'smooth'
  });
  return false;
} 


var reloading = {}, lastStarted = "";
var frames = document.getElementsByTagName("iframe");

var prevScrollpos = window.pageYOffset;
function toggleNavBar() {
  var currentScrollPos = window.pageYOffset;
  
  if (prevScrollpos > currentScrollPos && lastStarted.offsetTop - window.pageYOffset <= 0) {
    document.getElementById("navbar").style.top = "0";
  } else if(currentScrollPos - prevScrollpos > 5 || prevScrollpos - currentScrollPos > 5){
    document.getElementById("navbar").style.top = "-52px";
  }
  prevScrollpos = currentScrollPos;
}



function checkIframeInViewport(){
  toggleNavBar();
  var vpmin = window.pageYOffset;
  
  var lastFrame = manyeyes;
  if(vpmin >= lastFrame.offsetTop + lastFrame.offsetHeight*2 ){
    scrollTo({top: fill1.offsetTop, left: 0, behavior: "instant"})
  }

  //if(vpmin > fluffy.offsetTop)pointy.style.top = pointy2.offsetTop + "px";
  //else pointy.style.top = "0px";

  if(vpmin > lastFrame.offsetTop)falling.style.top = falling2.offsetTop + "px";
  else falling.style.top = fill1.offsetTop + "px";

  for(var i = 0 ; i <frames.length; i++){
    var min = frames[i].offsetTop + (frames[i].offsetHeight*0.5) ;
    var max = min + frames[i].offsetHeight*0;

    
    var vpmax = vpmin + window.innerHeight;

    

    
    if(max <= vpmin || min > vpmax){
      if(frames[i].contentWindow.stop){
        frames[i].contentWindow.stop();
        //console.log("stop" , frames[i].src , i );
      }
    } 
    else{
      if(!frames[i].contentWindow.document.body || frames[i].contentWindow.document.body.children.length == 0){
        if(!reloading[frames[i].src]){
          frames[i].src = frames[i].src;
          reloading[frames[i].src] = true;
        }
        
          
        return;
      }

      if(frames[i].contentWindow.start){
        frames[i].contentWindow.start();
        lastStarted = frames[i];
        //console.log("start" , frames[i].src , i );

        if(frames[i].id == "pointy" || frames[i].id == "pointy2"){
          if(document.location.hash != ""){
            //console.log("pushstate pointy")
            history.replaceState(undefined, undefined, " ");
          }
        }else if(document.location.hash != "#" + frames[i].id){
          //console.log(document.location.hash , frames[i].id)
          history.replaceState(undefined, undefined, "#" + frames[i].id)
        };
      }

    }
    
  }
}

function toggleInfo(){
  if(window.getComputedStyle(moreinfo, null).display === 'none')
    showInfo();
  else
    hideInfo();
}

function showInfo() {
  
    moreinfo.style.display = 'block';
    //event.preventDefault();
    moreInfoButton.classList.add("change");
}

function hideInfo() {
  moreinfo.style.display = 'none';
  moreInfoButton.classList.remove("change");
}

</script>


</html>
